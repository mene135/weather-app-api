(()=>{"use strict";function e(e,t,n){e.src=`https://openweathermap.org/img/wn/${t}@2x.png`,e.setAttribute("alt",`${n}`),e.setAttribute("title",`${n}`)}function t(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function n(e){return t(e).getHours()}function a(e){return t(1e3*e)}function c(e){return Math.floor(100*e)}function o(e){const n=t(a(e)).getDay();return 0===n?"Sunday":1===n?"Monday":2===n?"Tuesday":3===n?"Wednesday":4===n?"Thursday":5===n?"Friday":6===n?"Saturday":void 0}function s(e){const c=a(e),o=n(c);let s=function(e){return t(e).getMinutes()}(c);return 1===s.toString(10).length&&(s=`0${s}`),`${o} : ${s}`}function d(e){return Math.round(e)}function r(e){document.querySelector(".l-mainDisplay").appendChild(e)}function i(e){document.querySelector(".weather-content-wrapper").appendChild(e)}function l(e){const t=document.querySelector(".generalInfoSection"),n=document.querySelector(".dailyForecastSection"),a=document.querySelector(".weather-content-wrapper");e.matches&&t?(t.remove(),a.insertBefore(t,n)):t&&(t.remove(),a.appendChild(t))}const u=window.matchMedia("(min-width: 768px");async function m(t){!function(){const e=document.querySelector(".weather-content-wrapper");e&&e.remove()}(),document.querySelector(".loader").classList.remove("loader-isHidden"),document.querySelector(".toast").classList.add("toast-isHidden");const m=document.createElement("div");let p;m.classList.add("weather-content-wrapper"),document.querySelector("main").appendChild(m);try{p=await function(e){return fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=2815b9b71f4c4387bd5d1f3c3f298af6`,{mode:"cors"}).then((e=>{if(!1===e.ok)throw new Error(`getCordinates fetch operation unsuccessful: ${e.status} ${e.statusText}`);return e.json()})).then((e=>{if(0===e.length)throw new Error("City not found");const{lat:t,lon:n,name:a}=e[0];return{name:a,lat:t,lon:n}})).catch((e=>{if("Failed to fetch"===e.message)throw new Error("Network error");throw e}))}(t)}catch(e){return document.querySelector(".loader").classList.add("loader-isHidden"),void function(e){document.querySelector(".toast-message").textContent=`${e}`,document.querySelector(".toast").classList.remove("toast-isHidden")}(e)}const{lat:h,lon:g}=p,f=document.querySelector(".selectedMetric");let y;f.classList.contains("metric-celsius")&&(y="metric"),f.classList.contains("metric-fahrenheit")&&(y="imperial");const L=await function(e,t,n){return fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=${e}&lon=${t}&exclude=minutely&appid=2815b9b71f4c4387bd5d1f3c3f298af6&units=${n}`,{mode:"cors"}).then((e=>{if(!1===e.ok)throw new Error(`getWeather fetch operation unsuccessful: ${e.status} ${e.statusText}`);return e.json()})).then((e=>(console.log(e),e))).catch((e=>{console.error(e)}))}(h,g,y);document.querySelector(".loader").classList.add("loader-isHidden"),function(){const e=document.createElement("div");e.classList.add("l-mainDisplay"),document.querySelector(".weather-content-wrapper").appendChild(e)}(),function(e,t){const n=document.createElement("section");n.classList.add("mainInfoSection"),n.setAttribute("aria-label","city info");const{name:a}=e,c=document.createElement("h2");c.textContent=`${a}`,c.classList.add("city");const{main:o}=t.current.weather[0],s=document.createElement("div");s.textContent=`${o}`,s.classList.add("city-weather");const{temp:i}=t.current,l=document.createElement("div");let u;l.textContent=`${d(i)}°`,l.classList.add("city-temperature"),u=document.querySelector(".selectedMetric").classList.contains("metric-celsius")?"Celsius":"Fahrenheit";const m=document.createElement("span");m.textContent=`${u}`,m.classList.add("visually-hidden"),l.appendChild(m);const{min:p,max:h}=t.daily[0].temp,g=document.createElement("div"),f=document.createElement("div"),y=document.createElement("div");f.textContent=`H:${d(h)}°`,y.textContent=`L:${d(p)}°`,f.classList.add("city-highAndLowTemp-high"),y.classList.add("city-highAndLowTemp-low"),g.classList.add("city-highAndLowTemp"),g.append(f,y),n.append(c,s,l,g),r(n)}(p,L),function(t){const o=document.createElement("section");o.classList.add("hourlyForecastSection");const s=document.createElement("h2");s.classList.add("hourlyForecast-heading"),s.textContent="Hourly Forecast";const i=document.createElement("ul");i.classList.add("hourlyForecast-list");const l=t.hourly.slice(0,24);for(let t=0;t<l.length;t+=1){const o=document.createElement("li"),s=document.createElement("div"),r=document.createElement("div"),m=new Image,p=document.createElement("div");o.classList.add("hourlyForecast"),s.classList.add("hourlyForecast-hour"),r.classList.add("hourlyForecast-rainChance"),m.classList.add("hourlyForecast-weatherImage"),p.classList.add("hourlyForecast-temperature"),s.textContent=0===t?"Now":`${u=l[t].dt,n(a(u))}`,0!==l[t].pop&&(r.textContent=`${c(l[t].pop)}%`),e(m,l[t].weather[0].icon,l[t].weather[0].description),p.textContent=`${d(l[t].temp)}°`,o.append(s,r,m,p),i.appendChild(o)}var u;o.append(s,i),r(o)}(L),function(e){const{max:t,min:n}=e.temp,a=e.weather[0].description,c=document.createElement("section");c.setAttribute("aria-label","todays description");const o=document.createElement("p");c.classList.add("todaysDescription"),o.classList.add("todaysDescription-paragraph"),o.textContent=`Today: ${a}. The high will be ${d(t)}°. The low will be ${d(n)}°.`,c.appendChild(o),r(c)}(L.daily[0]),function(t){const n=document.createElement("section");n.classList.add("dailyForecastSection");const a=document.createElement("h2");a.textContent="Daily Forecast",a.classList.add("dailyForecast-heading");const c=document.createElement("ul");c.classList.add("dailyForecast-list");for(let n=1;n<t.length;n+=1){const a=document.createElement("li"),s=document.createElement("div"),r=new Image,i=document.createElement("div"),l=document.createElement("span"),u=document.createElement("span");a.classList.add("dailyForecast"),s.classList.add("dailyForecast-day"),r.classList.add("dailyForecast-weatherImage"),i.classList.add("dailyForecast-highAndLowContainer"),l.classList.add("dailyForecast-highAndLowContainer-high"),u.classList.add("dailyForecast-highAndLowContainer-low"),s.textContent=`${o(t[n].dt)}`,e(r,t[n].weather[0].icon,t[n].weather[0].description),l.textContent=`${d(t[n].temp.max)}°`,u.textContent=`${d(t[n].temp.min)}°`,i.appendChild(l),i.appendChild(u),a.appendChild(s),a.appendChild(r),a.appendChild(i),c.appendChild(a)}n.append(a,c),i(n)}(L.daily),function(e){const t=document.createElement("section");t.classList.add("generalInfoSection");const n=document.createElement("h2");n.textContent="General information",n.classList.add("generalInfo-heading");const a=document.createElement("ol");a.classList.add("generalInfo-list");const{sunrise:o,sunset:r}=e.daily[0],l=document.createElement("li"),u=document.createElement("div"),m=document.createElement("div");u.textContent="SUNRISE",m.textContent=`${s(o)}`;const p=document.createElement("li"),h=document.createElement("div"),g=document.createElement("div");h.textContent="SUNSET",g.textContent=`${s(r)}`,u.classList.add("generalInfo-title"),m.classList.add("generalInfo-value"),h.classList.add("generalInfo-title"),g.classList.add("generalInfo-value"),l.classList.add("generalInfo"),p.classList.add("generalInfo"),l.append(u,m),p.append(h,g);const{pop:f}=e.hourly[0],y=document.createElement("li"),L=document.createElement("div"),E=document.createElement("div");L.textContent="CHANCE OF RAIN",E.textContent=`${c(f)}%`,L.classList.add("generalInfo-title"),E.classList.add("generalInfo-value"),y.classList.add("generalInfo"),y.append(L,E);const{humidity:v}=e.hourly[0],C=document.createElement("li"),w=document.createElement("div"),I=document.createElement("div");w.textContent="HUMIDITY",I.textContent=`${v}%`,w.classList.add("generalInfo-title"),I.classList.add("generalInfo-value"),C.classList.add("generalInfo"),C.append(w,I);const{wind_speed:S,wind_deg:x}=e.hourly[0],N=document.createElement("li"),$=document.createElement("div"),b=document.createElement("div");$.textContent="WIND";const q=function(e){const t=[{directionName:"N",degrees:0},{directionName:"NNE",degrees:22.5},{directionName:"NE",degrees:45},{directionName:"ENE",degrees:67.5},{directionName:"E",degrees:90},{directionName:"ESE",degrees:112.5},{directionName:"SE",degrees:135},{directionName:"SSE",degrees:157.5},{directionName:"S",degrees:180},{directionName:"SSW",degrees:202.5},{directionName:"SW",degrees:225},{directionName:"WSW",degrees:247.5},{directionName:"W",degrees:270},{directionName:"WNW",degrees:292.5},{directionName:"NW",degrees:315},{directionName:"NNW",degrees:337.5},{directionName:"N",degrees:360}];for(let n=0;n<t.length;n+=1){if(t[n].degrees===e)return t[n].directionName;if(t[n].degrees>e)return e-t[n-1].degrees<t[n].degrees-e?t[n-1].directionName:t[n].directionName}}(x);var F;b.textContent=`${q} ${d((F=S,document.querySelector(".selectedMetric").classList.contains("metric-celsius")?function(e){return 3.6*e}(F):function(e){return 1.609344*e}(F)))} km/hr`,$.classList.add("generalInfo-title"),b.classList.add("generalInfo-value"),N.classList.add("generalInfo"),N.append($,b);const{feels_like:T}=e.hourly[0],A=document.createElement("li"),M=document.createElement("div"),D=document.createElement("div");M.textContent="FEELS LIKE",D.textContent=`${d(T)}°`,M.classList.add("generalInfo-title"),D.classList.add("generalInfo-value"),A.classList.add("generalInfo"),A.append(M,D);const{rain:W}=e.daily[0],H=document.createElement("li"),k=document.createElement("div"),j=document.createElement("div");k.textContent="PRECIPITATION",j.textContent=`${W} mm/h`,void 0===W&&(j.textContent=0),k.classList.add("generalInfo-title"),j.classList.add("generalInfo-value"),H.classList.add("generalInfo"),H.append(k,j);const{pressure:R}=e.hourly[0],U=document.createElement("li"),P=document.createElement("div"),O=document.createElement("div");P.textContent="PRESSURE",O.textContent=`${R} hPa`,P.classList.add("generalInfo-title"),O.classList.add("generalInfo-value"),U.classList.add("generalInfo"),U.append(P,O);const{visibility:_}=e.hourly[0],B=document.createElement("li"),V=document.createElement("div"),Y=document.createElement("div");V.textContent="VISIBILITY",Y.textContent=`${function(e){return e/100}(_)} km`,V.classList.add("generalInfo-title"),Y.classList.add("generalInfo-value"),B.classList.add("generalInfo"),B.append(V,Y);const{uvi:G}=e.hourly[0],K=document.createElement("li"),X=document.createElement("div"),z=document.createElement("div");X.textContent="UVI INDEX",z.textContent=`${G}`,X.classList.add("generalInfo-title"),z.classList.add("generalInfo-value"),K.classList.add("generalInfo"),K.append(X,z),a.append(l,p,y,C,N,U,A,H,H,B,K),t.append(n,a),i(t)}(L),l(u)}const p=document.querySelector(".toggleMetric");p.addEventListener("click",(()=>{const e=document.querySelector(".metric-celsius"),t=document.querySelector(".metric-fahrenheit");e.classList.contains("selectedMetric")?(e.classList.remove("selectedMetric"),t.classList.add("selectedMetric"),p.setAttribute("aria-label","Toggle metric used, currently selected metric is fahrenheit, other option is celsius")):(e.classList.add("selectedMetric"),t.classList.remove("selectedMetric"),p.setAttribute("aria-label","Toggle metric used, currently selected metric is celsius, other option is fahrenheit")),document.querySelector(".weather-content-wrapper")&&m(document.querySelector(".city").textContent)})),document.querySelector(".search-btn").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".search-input").value;""!==t&&(document.querySelector(".search-input").value="",m(t))})),u.addEventListener("change",l),window.addEventListener("load",(()=>{m("London")}))})();
//# sourceMappingURL=bundle.js.map