(()=>{"use strict";function e(e,t,n){e.src=`https://openweathermap.org/img/wn/${t}@2x.png`,e.setAttribute("alt",`${n}`),e.setAttribute("title",`${n}`)}function t(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function n(e){return t(e).getHours()}function a(e){return t(1e3*e)}function o(e){return Math.floor(100*e)}function c(e){const n=t(a(e)).getDay();return 0===n?"Sunday":1===n?"Monday":2===n?"Tuesday":3===n?"Wednesday":4===n?"Thursday":5===n?"Friday":6===n?"Saturday":void 0}function d(e){const o=a(e),c=n(o);let d=function(e){return t(e).getMinutes()}(o);return 1===d.toString(10).length&&(d=`0${d}`),`${c} : ${d}`}function r(e){return Math.round(e)}const s=window.matchMedia("(min-width: 768px");function i(e){const t=document.querySelector(".generalInfo-container"),n=document.querySelector(".dailyForecastContainer"),a=document.querySelector(".weather-content-wrapper");e.matches&&t?(t.remove(),a.insertBefore(t,n)):t&&(t.remove(),a.appendChild(t))}function l(e){document.querySelector(".l-mainDisplay").appendChild(e)}function u(e){document.querySelector(".weather-content-wrapper").appendChild(e)}s.addEventListener("change",i);const m=document.querySelector("main");function p(){const e=document.querySelector(".loader");e.classList.contains("loader-isHidden")?e.classList.remove("loader-isHidden"):!1===e.classList.contains("loader-isHidden")&&e.classList.add("loader-isHidden")}async function h(t){!function(){const e=document.querySelector(".weather-content-wrapper");e&&e.remove()}(),p();const h=document.createElement("div");let g;h.classList.add("weather-content-wrapper"),m.appendChild(h);try{g=await function(e){return fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=2815b9b71f4c4387bd5d1f3c3f298af6`,{mode:"cors"}).then((e=>{if(console.log(e),!1===e.ok)throw new Error(`getCordinates fetch operation unsuccessful: ${e.status} ${e.statusText}`);return e.json()})).then((e=>{if(console.log(e),0===e.length)throw new Error("City not found");const t=e[0].lat,n=e[0].lon,a=e[0].name;return console.log(e),{name:a,lat:t,lon:n}})).catch((e=>{if("Failed to fetch"===e.message)throw new Error("Network errror");throw console.log(e),e}))}(t),document.querySelector(".toast").classList.add("toast-isHidden")}catch(e){return console.error(e),p(),void function(e){console.log("handle wrong city search working"),document.querySelector(".toast-message").textContent=`${e}`,document.querySelector(".toast").classList.remove("toast-isHidden"),setTimeout((()=>{document.querySelector(".toast").classList.add("toast-isHidden")}),5e3)}(e)}const{lat:f,lon:L}=g,y=document.querySelector(".selectedMetric");let v;y.classList.contains("metric-celsius")&&(v="metric"),y.classList.contains("metric-fahrenheit")&&(v="imperial");const E=await function(e,t,n){return fetch(`https://api.openweathermap.org/data/3.0/onecall?lat=${e}&lon=${t}&exclude=minutely&appid=2815b9b71f4c4387bd5d1f3c3f298af6&units=${n}`,{mode:"cors"}).then((e=>{if(!1===e.ok)throw new Error(`getWeather fetch operation unsuccessful: ${e.status} ${e.statusText}`);return e.json()})).then((e=>(console.log(e),e))).catch((e=>{console.error(e)}))}(f,L,v);p(),function(){const e=document.createElement("div");e.classList.add("l-mainDisplay"),document.querySelector(".weather-content-wrapper").appendChild(e)}(),function(e,t){const n=document.createElement("div");n.classList.add("mainInfo");const{name:a}=e,o=document.createElement("div");o.textContent=`${a}`,o.classList.add("city");const{main:c}=t.current.weather[0],d=document.createElement("div");d.textContent=`${c}`,d.classList.add("city-weather");const{temp:s}=t.current,i=document.createElement("div");i.textContent=`${r(s)}°`,i.classList.add("city-temperature");const{min:u,max:m}=t.daily[0].temp,p=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div");h.textContent=`H:${r(m)}°`,g.textContent=`L:${r(u)}°`,h.classList.add("city-highAndLowTemp-high"),g.classList.add("city-highAndLowTemp-low"),p.classList.add("city-highAndLowTemp"),p.append(h,g),n.append(o,d,i,p),l(n)}(g,E),function(t){const c=t.hourly.slice(0,24),d=document.createElement("div");d.classList.add("hourlyForecastContainer");for(let t=0;t<c.length;t+=1){const i=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),m=new Image,p=document.createElement("div");i.classList.add("hourlyForecast"),l.classList.add("hourlyForecast-hour"),u.classList.add("hourlyForecast-rainChance"),m.classList.add("hourlyForecast-weatherImage"),p.classList.add("hourlyForecast-temperature"),l.textContent=0===t?"Now":`${s=c[t].dt,n(a(s))}`,0!==c[t].pop&&(u.textContent=`${o(c[t].pop)}%`),e(m,c[t].weather[0].icon,c[t].weather[0].description),p.textContent=`${r(c[t].temp)}°`,i.append(l,u,m,p),d.appendChild(i)}var s;l(d)}(E),function(e){const{max:t,min:n}=e.temp,a=e.weather[0].description,o=document.createElement("div"),c=document.createElement("p");o.classList.add("todaysDescription"),c.classList.add("todaysDescription-paragraph"),c.textContent=`Today: ${a}. The high will be ${r(t)}°. The low will be ${r(n)}°.`,o.appendChild(c),l(o)}(E.daily[0]),function(t){const n=document.createElement("div");n.classList.add("dailyForecastContainer");for(let a=1;a<t.length;a+=1){const o=document.createElement("div"),d=document.createElement("div"),s=new Image,i=document.createElement("div"),l=document.createElement("span"),u=document.createElement("span");o.classList.add("dailyForecast"),d.classList.add("dailyForecast-day"),s.classList.add("dailyForecast-weatherImage"),i.classList.add("dailyForecast-highAndLowContainer"),l.classList.add("dailyForecast-highAndLowContainer-high"),u.classList.add("dailyForecast-highAndLowContainer-low"),d.textContent=`${c(t[a].dt)}`,e(s,t[a].weather[0].icon,t[a].weather[0].description),l.textContent=`${r(t[a].temp.max)}°`,u.textContent=`${r(t[a].temp.min)}°`,i.appendChild(l),i.appendChild(u),o.appendChild(d),o.appendChild(s),o.appendChild(i),n.appendChild(o)}u(n)}(E.daily),function(e){const t=document.createElement("div");t.classList.add("generalInfo-container");const{sunrise:n,sunset:a}=e.daily[0],c=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div");s.textContent="SUNRISE",i.textContent=`${d(n)}`;const l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("div");m.textContent="SUNSET",p.textContent=`${d(a)}`,s.classList.add("generalInfo-title"),i.classList.add("generalInfo-value"),m.classList.add("generalInfo-title"),p.classList.add("generalInfo-value"),c.classList.add("generalInfo"),l.classList.add("generalInfo"),c.append(s,i),l.append(m,p);const{pop:h}=e.hourly[0],g=document.createElement("div"),f=document.createElement("div"),L=document.createElement("div");f.textContent="CHANCE OF RAIN",L.textContent=`${o(h)}%`,f.classList.add("generalInfo-title"),L.classList.add("generalInfo-value"),g.classList.add("generalInfo"),g.append(f,L);const{humidity:y}=e.hourly[0],v=document.createElement("div"),E=document.createElement("div"),w=document.createElement("div");E.textContent="HUMIDITY",w.textContent=`${y}%`,E.classList.add("generalInfo-title"),w.classList.add("generalInfo-value"),v.classList.add("generalInfo"),v.append(E,w);const{wind_speed:C,wind_deg:I}=e.hourly[0],S=document.createElement("div"),x=document.createElement("div"),N=document.createElement("div");x.textContent="WIND";const $=function(e){const t=[{directionName:"N",degrees:0},{directionName:"NNE",degrees:22.5},{directionName:"NE",degrees:45},{directionName:"ENE",degrees:67.5},{directionName:"E",degrees:90},{directionName:"ESE",degrees:112.5},{directionName:"SE",degrees:135},{directionName:"SSE",degrees:157.5},{directionName:"S",degrees:180},{directionName:"SSW",degrees:202.5},{directionName:"SW",degrees:225},{directionName:"WSW",degrees:247.5},{directionName:"W",degrees:270},{directionName:"WNW",degrees:292.5},{directionName:"NW",degrees:315},{directionName:"NNW",degrees:337.5},{directionName:"N",degrees:360}];for(let n=0;n<t.length;n+=1){if(t[n].degrees===e)return t[n].directionName;if(t[n].degrees>e)return e-t[n-1].degrees<t[n].degrees-e?t[n-1].directionName:t[n].directionName}}(I);var q;N.textContent=`${$} ${r((q=C,document.querySelector(".selectedMetric").classList.contains("metric-celsius")?function(e){return 3.6*e}(q):function(e){return 1.609344*e}(q)))} km/hr`,x.classList.add("generalInfo-title"),N.classList.add("generalInfo-value"),S.classList.add("generalInfo"),S.append(x,N);const{feels_like:b}=e.hourly[0],F=document.createElement("div"),T=document.createElement("div"),M=document.createElement("div");T.textContent="FEELS LIKE",M.textContent=`${r(b)}°`,T.classList.add("generalInfo-title"),M.classList.add("generalInfo-value"),F.classList.add("generalInfo"),F.append(T,M);const{rain:D}=e.daily[0],W=document.createElement("div"),A=document.createElement("div"),H=document.createElement("div");A.textContent="PRECIPITATION",H.textContent=`${D} mm/h`,void 0===D&&(H.textContent=0),A.classList.add("generalInfo-title"),H.classList.add("generalInfo-value"),W.classList.add("generalInfo"),W.append(A,H);const{pressure:k}=e.hourly[0],j=document.createElement("div"),R=document.createElement("div"),U=document.createElement("div");R.textContent="PRESSURE",U.textContent=`${k} hPa`,R.classList.add("generalInfo-title"),U.classList.add("generalInfo-value"),j.classList.add("generalInfo"),j.append(R,U);const{visibility:P}=e.hourly[0],O=document.createElement("div"),_=document.createElement("div"),B=document.createElement("div");_.textContent="VISIBILITY",B.textContent=`${function(e){return e/100}(P)} km`,_.classList.add("generalInfo-title"),B.classList.add("generalInfo-value"),O.classList.add("generalInfo"),O.append(_,B);const{uvi:V}=e.hourly[0],Y=document.createElement("div"),K=document.createElement("div"),X=document.createElement("div");K.textContent="UVI INDEX",X.textContent=`${V}`,K.classList.add("generalInfo-title"),X.classList.add("generalInfo-value"),Y.classList.add("generalInfo"),Y.append(K,X),t.append(c,l,g,v,S,j,F,W,W,O,Y),u(t)}(E),i(s)}document.querySelector(".toggleMetric").addEventListener("click",(()=>{const e=document.querySelector(".metric-celsius"),t=document.querySelector(".metric-fahrenheit");e.classList.contains("selectedMetric")?(e.classList.remove("selectedMetric"),t.classList.add("selectedMetric")):(e.classList.add("selectedMetric"),t.classList.remove("selectedMetric")),document.querySelector(".weather-content-wrapper")&&h(document.querySelector(".city").textContent)})),document.querySelector(".search-btn").addEventListener("click",(e=>{const t=document.querySelector(".search-input").value;document.querySelector(".search-input").value="",h(t),e.preventDefault()})),window.onload=function(){}})();
//# sourceMappingURL=bundle.js.map